{"version":3,"file":"js/app.7bbc8a10.js","mappings":"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","sources":["webpack://rongduanlema/./src/App.vue","webpack://rongduanlema/./src/components/FlightView.vue","webpack://rongduanlema/./src/components/DateItem.vue","webpack://rongduanlema/./src/utils/simulation.js","webpack://rongduanlema/./src/components/DateItem.vue?5b25","webpack://rongduanlema/./src/components/HeaderLinks.vue","webpack://rongduanlema/./src/components/HeaderLinks.vue?b1ef","webpack://rongduanlema/./src/components/FlightView.vue?1583","webpack://rongduanlema/./src/components/FlightViewNew.vue","webpack://rongduanlema/./src/components/DateItemNew.vue","webpack://rongduanlema/./src/components/DateItemNew.vue?1a23","webpack://rongduanlema/./src/components/HeaderLinksNew.vue","webpack://rongduanlema/./src/components/HeaderLinksNew.vue?ddb3","webpack://rongduanlema/./src/utils/simulation_new.js","webpack://rongduanlema/./src/components/FlightViewNew.vue?c2da","webpack://rongduanlema/./src/App.vue?7ccd","webpack://rongduanlema/./src/main.js","webpack://rongduanlema/webpack/bootstrap","webpack://rongduanlema/webpack/runtime/chunk loaded","webpack://rongduanlema/webpack/runtime/compat get default export","webpack://rongduanlema/webpack/runtime/define property getters","webpack://rongduanlema/webpack/runtime/global","webpack://rongduanlema/webpack/runtime/hasOwnProperty shorthand","webpack://rongduanlema/webpack/runtime/make namespace object","webpack://rongduanlema/webpack/runtime/jsonp chunk loading","webpack://rongduanlema/webpack/startup"],"sourcesContent":["<template>\n\n    <div v-if=\"newVersionEnabled\">\n        <flight-view-new></flight-view-new>\n    </div>\n    <div v-else>\n        <flight-view></flight-view>\n    </div>\n\n    <a-row justify=\"space-around\">\n      <a-col :lg=\"12\" :md=\"24\">\n        开启新版：<a-switch v-model:checked=\"newVersionEnabled\"></a-switch>\n      </a-col>\n    </a-row>\n\n\n  <component :is=\"'script'\">\n    window.dataLayer = window.dataLayer || [];\n    function gtag(){dataLayer.push(arguments);}\n    gtag('js', new Date());\n\n    gtag('config', 'G-WKB857318N');\n  </component>\n</template>\n\n<script>\nimport { Switch, Row, Col } from 'ant-design-vue';\nimport FlightView from './components/FlightView.vue';\nimport FlightViewNew from './components/FlightViewNew.vue';\n\nexport default {\n  name: 'AppNew',\n  components: {\n    FlightView,\n    FlightViewNew,\n    ASwitch: Switch,\n    ARow: Row,\n    ACol: Col,  \n  },\n  data() {\n    return {\n        newVersionEnabled: true,\n    }\n  },\n  created () {\n      document.title = \"今天航班熔断了吗？\";\n  },\n  mounted() {\n    let gaScript = document.createElement('script')\n    gaScript.setAttribute('src', 'https://www.googletagmanager.com/gtag/js?id=G-WKB857318N')\n    document.head.appendChild(gaScript)\n  },\n}\n</script>\n\n<style>\n\n</style>\n","\n<template>\n  <div>\n    <a-row justify=\"space-around\">\n      <a-col :lg=\"12\" :md=\"24\">\n        <h1>今天航班熔断了吗？</h1>\n        <hr />\n        一个简单的熔断计算器：填入已知的阳性病例信息，计算未来会被熔断的航班。\n        <br />\n        <header-links></header-links>\n        <p>不考虑奖励航班和控制客座率措施。<strong>仅供参考！</strong></p>\n\n        首个航班入境日期：<a-date-picker\n          v-model:value=\"beginDate\"\n          @change=\"inputHandler\"\n        ></a-date-picker>\n        <br />\n        周数：<a-input-number\n          v-model:value=\"numberOfWeeks\"\n          :min=\"1\"\n          :max=\"40\"\n          @change=\"inputHandler\"\n        />\n        \n        <p>图例：日期，取消开关，阳性数量 -> 熔断状态，航班状态 <br/>\n        地区提示：美国：航司可能对航班进行<a href=\"https://piao.tips/7bc7e7ee15/\" target=\"_blank\">「规律性取消」</a>，可使用航班卡片中的开关手动取消特定航班。</p>\n\n        <a-collapse>\n          <a-collapse-panel key=\"states\" header=\"状态说明\">\n            <p>正常：航班状态正常（0~4 例阳性，不触发熔断）</p>\n            <p>小熔断：5~9 例阳性，触发航班入境第四周起的 2 周熔断</p>\n            <p>大熔断：10~30 例阳性，触发航班入境第四周起的 4 周熔断（若连续两周 10 例或以上阳性，立刻触发 4 周熔断）</p>\n            <p>超级熔断：30 例以上阳性，立即触发 4 周熔断</p>\n            <p>(稳)：（实验性）若触发连续熔断，熔断恢复后的第一班是一定能正常执飞的。（第二班可能被第一班触发超级熔断，第三班可能因前两班同时大熔断而被熔断。）</p>\n          </a-collapse-panel>\n          <a-collapse-panel key=\"simulation\" header=\"（实验性）日期安全性计算\">\n            <a-switch v-model:checked=\"enableSimulation\" checked-children=\"开启\" un-checked-children=\"关闭\" />\n            <strong>实验性！</strong> \n            <p>输入到目前为止已知的熔断信息和自己估计的熔断概率后，计算未来每周航班正常执飞的概率。</p>\n            <p>需要输入的概率值之和为 100 %。计算时页面会卡顿，但通常可在 5 秒内计算完毕（周数为 20 周时）。</p>\n            <p>结果为航班不受熔断影响正常执飞的概率，显示在每个航班所在行的最后，颜色越深，正常执飞的概率越高，即日期越安全。</p>\n            <p>计算原理：在不影响已设定值的前提下，遍历所有可能的熔断/正常组合并记录每种组合对应的概率，最后对每个航次正常执飞的概率求和。</p>\n            <br />\n            <p>已确定周数：算法假设从第一周至 X 周的阳性病例数是确定且已知的，运行中不会变更这些周的结果。</p>\n\n\n            <br />\n\n            <a-alert v-show=\"!enableSimulation\" message=\"未开启本功能，请拨动左上角的开关\" type=\"warning\" show-icon />\n            <a-alert v-show=\"!probSumValid\" message=\"概率和不为 100%\" type=\"error\" show-icon />\n            <a-alert v-show=\"!initialized\" message=\"未填写首个航班入境日期\" type=\"error\" show-icon />\n            \n\n            <a-form layout=\"inline\">\n              <a-form-item label=\"正常\">\n                <a-input-number v-model:value=\"probOk\" addon-after=\"%\" min=\"0\" max=\"100\"></a-input-number>\n              </a-form-item>\n              <a-form-item label=\"小熔断\">\n                <a-input-number v-model:value=\"probMinor\" addon-after=\"%\" min=\"0\" max=\"100\"></a-input-number>\n              </a-form-item>\n              <a-form-item label=\"大熔断\">\n                <a-input-number v-model:value=\"probMajor\" addon-after=\"%\"  min=\"0\" max=\"100\"></a-input-number>\n              </a-form-item>\n              <a-form-item label=\"超级熔断\">\n                <a-input-number v-model:value=\"probImmediate\" addon-after=\"%\"  min=\"0\" max=\"100\"></a-input-number>\n              </a-form-item>\n              <a-form-item label=\"已确定周数（包含）\">\n                <a-input-number v-model:value=\"knownWeekCount\" addon-before=\"至第\" addon-after=\"周\" min=\"0\" :max=\"numberOfWeeks\"></a-input-number>\n              </a-form-item>\n            </a-form>\n            <a-form-item>\n              <a-button type=\"primary\" @click=\"runSimulation\" :disabled=\"!simulationEnabled\">计算</a-button>\n            </a-form-item>\n          </a-collapse-panel>\n        </a-collapse>\n      </a-col>\n    </a-row>\n\n    <a-row justify=\"space-around\">\n      <a-col :lg=\"12\" :md=\"24\">\n        <div v-for=\"(item, index) in datesDetails\" :key=\"item.date\">\n          <date-item\n            :date=\"item.date\"\n            :count=\"item.count\"\n            :index=\"index\"\n            :triggerStatus=\"item.triggerStatus\"\n            :flightStatus=\"item.flightStatus\"\n            :enabled=\"item.enabled\"\n            :surely=\"item.surely\"\n            :showProb=\"item.showProb && simulationEnabled\"\n            :yesProb=\"item.yesProb\"\n            @itemChange=\"itemChangeHandler\"\n          ></date-item>\n        </div>\n      </a-col>\n    </a-row>\n  </div>\n</template>\n\n<script>\nimport {\n  Button,\n  DatePicker,\n  InputNumber,\n  Space,\n  Row,\n  Col,\n  Collapse,\n  Form,\n  Alert,\n  Switch\n} from \"ant-design-vue\";\n\n\nimport DateItem from \"./DateItem.vue\";\nimport HeaderLinks from \"./HeaderLinks.vue\";\nimport {calculate, buildEmptyList, simulationMain } from \"../utils/simulation.js\";\nimport { toRaw } from \"@vue/reactivity\";\n//   const ButtonGroup = Button.Group;\n\nexport default {\n  components: {\n    AButton: Button,\n    ADatePicker: DatePicker,\n    ASpace: Space,\n    AInputNumber: InputNumber,\n    DateItem,\n    ARow: Row,\n    ACol: Col,\n    ACollapse: Collapse,\n    ACollapsePanel: Collapse.Panel,\n    AForm: Form,\n    AFormItem: Form.Item,\n    AAlert: Alert,\n    ASwitch: Switch,\n    HeaderLinks,\n  },\n  data() {\n    return {\n      beginDate: \"\",\n      numberOfWeeks: 20,\n      datesDetails: [],\n      knownWeekCount: 0,\n      probOk: 50,\n      probMinor: 40,\n      probMajor: 8,\n      probImmediate: 2,\n      enableSimulation: false,\n    };\n  },\n  computed: {\n    probSumValid() {\n      return this.probOk + this.probMinor + this.probMajor + this.probImmediate === 100;\n    },\n    initialized() {\n      return this.datesDetails.length > 0;\n    },\n    simulationEnabled() {\n      return this.initialized && this.probSumValid && this.enableSimulation;\n    }\n  },\n  methods: {\n    inputHandler(value) {\n      if (!value) return;\n\n      // repopulate\n      let targetDatesDetails = buildEmptyList(this.numberOfWeeks, this.beginDate);\n\n      for(let i = 0; i < targetDatesDetails.length; i++) {\n        let match = this.datesDetails.filter(x => x.date === targetDatesDetails[i].date)\n        if (match.length == 1) {\n          targetDatesDetails[i].count = match[0].count;\n          targetDatesDetails[i].enabled = match[0].enabled;\n        }\n        this.datesDetails.push(targetDatesDetails[i]);\n      }\n\n      this.datesDetails = targetDatesDetails;\n\n      this.reCalculate();\n    },\n    itemChangeHandler(param) {\n      this.datesDetails[param.index].count = param.count;\n      this.datesDetails[param.index].enabled = param.enabled;\n      this.reCalculate();\n    },\n    reCalculate() {\n      this.datesDetails = calculate(this.datesDetails);\n    },\n    runSimulation() {\n\n      let results = simulationMain({\n        \"datesDetails\": toRaw(this.datesDetails),\n        \"beginDate\": toRaw(this.beginDate),\n        \"numOfWeeks\": this.numberOfWeeks,\n        \"knownWeekCount\": this.knownWeekCount,\n        \"probMap\": {\n          \"ok\": this.probOk / 100,\n          \"minor\": this.probMinor / 100,\n          \"major\": this.probMajor / 100,\n          \"immediate\": this.probImmediate / 100\n        }\n      })\n\n      console.log(\"sim done\")\n\n      for(let i = this.knownWeekCount + 1; i < this.datesDetails.length; i++) {\n        let item = this.datesDetails[i];\n        item.yesProb = results[item.date][\"yes_prob\"];\n        item.showProb = true;\n      }\n\n      console.log(results);\n\n    }\n  },\n};\n</script>\n\n<style>\n</style>","<template>\n    <a-card :class=\"[flightStatus]\">\n        第 {{index+1}} 周:  {{date}}\n        <a-switch v-model:checked=\"localEnabled\" size=\"small\" @change=\"enabledChangeHandler\"></a-switch>\n        <a-input-number v-model:value=\"localCount\" @change=\"countChangeHandler\" :min=\"0\" :disabled=\"!localEnabled\"></a-input-number>\n        <a-button :class=\"triggerStatus\">{{surelyStr + triggerStatusName}}</a-button>\n        <span v-if=\"flightStatus === 'yes' \"><check-outlined /></span>\n        <span v-else> <stop-outlined /></span>\n        <a-button type=\"dashed\" :style=\"probColor\" v-if=\"showProb\">{{(yesProb * 100).toFixed(2) + '%' }}</a-button>\n    </a-card>\n</template>\n\n<script>\n  import { Button, InputNumber, Card, Switch } from 'ant-design-vue';\n  import { CheckOutlined, StopOutlined } from '@ant-design/icons-vue';\n  import { lerpColor } from '../utils/simulation';\n\nexport default {\n    components: {\n      AButton: Button,\n      AInputNumber: InputNumber,\n      ACard: Card,\n      CheckOutlined,\n      StopOutlined,\n      ASwitch: Switch,\n    },\n    props: {\n        date: {\n            type: String,\n            required: true\n        },\n        count: {\n            type: Number,\n            required: false,\n            default: 0,\n        },\n        index: {\n            type: Number,\n            required: true\n        },\n        triggerStatus: {\n            type: String,\n            required: true\n        },\n        flightStatus: {\n            type: String,\n            required: true\n        },\n        enabled: {\n            type: Boolean,\n            required: true,\n        },\n        surely: {\n            type: Boolean,\n            required: true,\n        },\n        showProb: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n        yesProb: {\n            type: Number,\n            required: false,\n            default: 0,\n        }\n    },\n    emits: ['itemChange'],\n    data() {\n        return {\n            localCount: this.count,\n            triggerStatusMap: {\n                \"ok\": \"正常\",\n                \"minor\": \"小熔断\",\n                \"major\": \"大熔断\",\n                \"immediate\": \"超级熔断\",\n                \"cancelled\": \"取消\",\n            },\n            localEnabled: this.enabled,\n        }\n    },\n    methods: {\n        countChangeHandler(value) {\n            this.localCount = value\n            this.$emit('itemChange', {\n                date: this.date,\n                count: this.localCount,\n                enabled: this.localEnabled,\n                index: this.index\n            })\n        },\n        enabledChangeHandler(value) {\n            this.localEnabled = value\n            if (!this.localEnabled) {\n                this.localCount = 0\n            }\n            this.$emit('itemChange', {\n                date: this.date,\n                count: this.localCount,\n                enabled: this.localEnabled,\n                index: this.index\n            })\n        },\n    },\n    computed: {\n        triggerStatusName() {\n            if(this.triggerStatus in this.triggerStatusMap) {\n                return this.triggerStatusMap[this.triggerStatus]\n            } else {\n                return this.triggerStatus.replace(\"broken by\", \"熔断，触发于\")\n            }\n\n        },\n        surelyStr() {\n            return this.surely ? \"(稳)\" : \"\"\n        },\n        probColor() {\n            let textColor = this.yesProb > 0.6 ? \"white\" : \"black\"\n            return {\n                \"background-color\": lerpColor(0xe3f2fd, 0x0d47a1, this.yesProb),\n                \"color\": textColor,\n            }\n        },\n    },\n    watch: { // 避免 props 和本地状态不同步\n        count: {\n            handler(value) {\n                this.localCount = value\n            },\n            immediate: true\n        },\n        enabled: {\n            handler(value) {\n                this.localEnabled = value\n            },\n            immediate: true\n        },\n    }\n}\n</script>\n\n<style scoped>\n.ok {\n    background-color: #28a745;\n}\n.minor {\n    background-color: #ef5350;\n}\n.major {\n    background-color: #f44336;\n}\n.immediate {\n    background-color: #ff1744;\n}\n.cancelled {\n    background-color: #78909c;\n}\n\n.yes {\n    background-color: #81c784;\n}\n.no {\n    background-color: #6c757d;\n}\n\n\n\n\n</style>","\nconst probCountMap = {\n    \"ok\": 0,\n    \"minor\": 5,\n    \"major\": 10,\n    \"immediate\": 30\n}\n\nfunction calculate(datesDetails){\n    // inplace, return reference\n    return calculateSurely(calculateBreak(datesDetails))\n}\n\nfunction calculateBreak(datesDetails) {\n    // inplace\n    console.log(\"recalculating...\");\n\n    // 状态重置\n    for (let i = 0; i < datesDetails.length; i++) {\n      let item = datesDetails[i];\n\n      item.triggerStatus = \"ok\";\n      item.flightStatus = \"yes\";\n      item.surely = false;\n\n      if (!item.enabled) {\n        item.triggerStatus = \"cancelled\";\n        item.flightStatus = \"no\";\n      }\n    }\n\n    // 计算熔断\n    for (let i = 0; i < datesDetails.length; i++) {\n      let item = datesDetails[i];\n      let breakWeekCount = 0;\n      let advanceWeek = 0;\n      let forceImmediateBreak = false;\n\n      if (item.flightStatus === \"yes\") {\n        if (0 <= item.count && item.count < 5) {\n          item.triggerStatus = \"ok\";\n        } else if (5 <= item.count && item.count < 10) {\n          item.triggerStatus = \"minor\";\n          breakWeekCount = 2;\n          advanceWeek = 4 - 1;\n        } else if (10 <= item.count && item.count < 30) {\n          item.triggerStatus = \"major\";\n          breakWeekCount = 4;\n          advanceWeek = 4 - 1;\n\n          // special case: 连续两周 10+，立刻熔断八周\n          if (i - 1 >= 0) {\n            let prevItem = datesDetails[i - 1];\n            if (prevItem.count >= 10) {\n              breakWeekCount = 8;\n              advanceWeek = 1;\n              forceImmediateBreak = true;\n            }\n          }\n        } else {\n          item.triggerStatus = \"immediate\";\n          breakWeekCount = 4;\n          advanceWeek = 1;\n        }\n      }\n\n      let j = 0;\n      while (\n        breakWeekCount > 0 &&\n        (i + advanceWeek + j < datesDetails.length)\n      ) {\n        let futureItem = datesDetails[i + advanceWeek + j];\n        if (futureItem.enabled) {\n          if (futureItem.flightStatus === \"yes\" || forceImmediateBreak) {\n            futureItem.flightStatus = \"no\";\n            futureItem.triggerStatus = `broken by ${item.date}`;\n            breakWeekCount--;\n            if (breakWeekCount === 0) {\n              forceImmediateBreak = false;\n            }\n          }\n        }\n\n        j++;\n      }\n    }\n\n    return datesDetails\n}\n\nfunction calculateSurely(datesDetails) {\n\n    // inplace\n\n    // 计算稳的航班\n    // 稳的航班：连续触发熔断（或者被取消）的航班和被熔断的航班相连，熔断结束后的头两个航班是一定安全的\n    let i = 0;\n    let surelyMarked = false\n    while (i < datesDetails.length) {\n    \n    if (datesDetails[i].flightStatus === \"no\" \n        && i - 1 >= 0 \n        &&  [\"major\", \"minor\", \"immediate\"].includes(datesDetails[i-1].triggerStatus)) {\n        console.log(i)\n        while (datesDetails[i].flightStatus === \"no\") {\n        i++;\n        }\n        let safeCount = 1;\n        while (safeCount > 0 && i < datesDetails.length) {\n        if (datesDetails[i].flightStatus === \"yes\") {\n            safeCount--;\n            datesDetails[i].surely = true;\n            surelyMarked = true;\n        }\n        i++;\n        }\n    }\n\n    if (surelyMarked) {\n        surelyMarked = false;\n        i--;\n    }\n    i++;\n    }\n\n    return datesDetails\n}\n\nfunction buildEmptyList(numberOfWeeks, beginDate) {\n    let targetDatesDetails = []\n    for (let i = 1; i <= numberOfWeeks; i++) {\n      let date = new Date(beginDate);\n      date.setDate(date.getDate() + (i - 1) * 7);\n      let dateString = new Date(date.getTime() - (date.getTimezoneOffset() * 60000 ))\n                  .toISOString()\n                  .split(\"T\")[0];\n      targetDatesDetails.push({\n        date: dateString,\n        count: 0,\n        triggerStatus: \"ok\",\n        flightStatus: \"yes\",\n        enabled: true, // 取消\n        surely: false, // 稳\n      });\n    }\n    return targetDatesDetails\n}\n\nfunction applyState(datesDetails, countState, enableState) {\n    for (let [idx, val] of countState.entries()) {\n        datesDetails[idx].count = val;\n    }\n    for (let [idx, val] of enableState.entries()) {\n        datesDetails[idx].enabled = val;\n    }\n}\n\nfunction buildInitialState(datesDetails, numberOfWeeks, knownWeekCount){\n    let countState = []\n    for (let i = 0; i < numberOfWeeks; i++) {\n        countState.push(0)\n    }\n    for (let i = 0; i < knownWeekCount; i++) {\n        countState[i] = datesDetails[i].count\n    }\n    let enableState = datesDetails.map(item => item.enabled)\n    return [countState, enableState]\n}\n\nfunction generateNext(datesDetails, currentSequence, probMap) {\n    let [actions, prob] = currentSequence;\n    let lastActedIndex = 0\n    for (let i=0; i < actions.length; i++) {\n        let [action, idx] = actions[i]\n        lastActedIndex = idx\n        if (action === \"nop\"){\n            continue\n        }\n        datesDetails[idx].count = probCountMap[action]\n    }\n\n    calculateBreak(datesDetails)\n\n    let nextUndertermined = lastActedIndex + 1\n    while (nextUndertermined < datesDetails.length && \n            (datesDetails[nextUndertermined].triggerStatus !== \"ok\" || !datesDetails[nextUndertermined].enabled)) {\n        nextUndertermined++\n    }\n\n    if (nextUndertermined === datesDetails.length) {\n        return null\n    }\n\n    let results = []\n    for (const [triggerState, triggerProb] of Object.entries(probMap)) {\n        if (triggerProb !== 0) {\n            let newActions = [...actions]\n            newActions.push([triggerState, nextUndertermined])\n            let newProb = prob * triggerProb\n            results.push([newActions, newProb])\n        }\n    }\n    return results\n}\n\nfunction getDailyResult(datesDetails, completedActions, initialCountState, initialEnableState) {\n    let dayToStatusMap = {}\n\n    for (let item of datesDetails){\n        dayToStatusMap[item.date] = {\"yes_prob\": 0, \"yes\": 0, \"no\": 0}\n    }\n\n    for (let actions_and_prob of completedActions) {\n        applyState(datesDetails, initialCountState, initialEnableState)\n        let [actions, prob] = actions_and_prob\n        for (let i=0; i < actions.length; i++) {\n            let [action, idx] = actions[i]\n            if (action === \"nop\"){\n                continue\n            }\n            datesDetails[idx].count = probCountMap[action]\n        }\n        calculateBreak(datesDetails)\n        for (let item of datesDetails) {\n            dayToStatusMap[item.date][item.flightStatus] = 1 + (dayToStatusMap[item.date][item.flightStatus] ?? 0)\n            if (item.flightStatus === \"yes\") {\n                dayToStatusMap[item.date][\"yes_prob\"] = prob + (dayToStatusMap[item.date][\"yes_prob\"] ?? 0)\n            }\n        }\n    }\n\n    return dayToStatusMap\n}\n\nfunction simulationMain(simConfig){\n    // have to copy\n\n    // debugger;\n    let {datesDetails, beginDate, numOfWeeks, knownWeekCount, probMap} = simConfig;\n\n    console.log(\"datesDetails\", datesDetails)\n\n    let workingDatesDetails = buildEmptyList(numOfWeeks, beginDate);\n    let [initialCountState, initialEnableState] = buildInitialState(datesDetails, numOfWeeks, knownWeekCount); \n    let possibleActions =  [[ [[\"nop\", knownWeekCount - 1]] ,1]] \n    let completedActions = []\n\n    while(possibleActions.length > 0){\n        applyState(workingDatesDetails, initialCountState, initialEnableState)\n        let currentSequence = possibleActions.shift()\n        let nextSteps = generateNext(workingDatesDetails, currentSequence, probMap)\n        if (nextSteps === null) {\n            completedActions.push(currentSequence)\n        } else {\n            possibleActions = possibleActions.concat(nextSteps)\n        }\n    }\n\n    console.log(\"sim done\")\n    console.log(`prob sum: ${completedActions.map(x => x[1]).reduce((a, b) => a + b, 0)}`)\n\n    let results = getDailyResult(workingDatesDetails, completedActions, initialCountState, initialEnableState)\n    return results\n}\n\n// https://gist.github.com/nikolas/b0cce2261f1382159b507dd492e1ceef\n/**\n * A linear interpolator for hex colors.\n *\n * Based on:\n * https://gist.github.com/rosszurowski/67f04465c424a9bc0dae\n *\n * @param {Number} a  (hex color start val)\n * @param {Number} b  (hex color end val)\n * @param {Number} amount  (the amount to fade from a to b)\n *\n * @example\n * // returns 0x7f7f7f\n * lerpColor(0x000000, 0xffffff, 0.5)\n *\n * @returns {Number}\n */\n const lerpColor = function(a, b, amount) {\n  const ar = a >> 16,\n        ag = a >> 8 & 0xff,\n        ab = a & 0xff,\n\n        br = b >> 16,\n        bg = b >> 8 & 0xff,\n        bb = b & 0xff,\n\n        rr = ar + amount * (br - ar),\n        rg = ag + amount * (bg - ag),\n        rb = ab + amount * (bb - ab);\n\n  return '#' + ((1 << 24) + (rr << 16) + (rg << 8) + rb | 0).toString(16).slice(1);\n};\n\nexport { simulationMain, calculate, buildEmptyList, lerpColor };\n","import { render } from \"./DateItem.vue?vue&type=template&id=30f871bf&scoped=true\"\nimport script from \"./DateItem.vue?vue&type=script&lang=js\"\nexport * from \"./DateItem.vue?vue&type=script&lang=js\"\n\nimport \"./DateItem.vue?vue&type=style&index=0&id=30f871bf&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/runner/work/rongduan_or_not/rongduan_or_not/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-30f871bf\"]])\n\nexport default __exports__","<template>\n    <h3 style=\"color: red\">这是旧的熔断措施页，现已不再适用！</h3>\n    <a-button size=\"large\" href=\"http://www.caac.gov.cn/XXGK/XXGK/TZTG/202104/t20210429_207386.html\" target=\"_blank\"><img src=\"assets/caac_logo.png\" style=\"max-height: 75%; width: auto;\"/>民航局文件</a-button> \n    <a-button size=\"large\" href=\"https://github.com/jerrylususu/rongduan_or_not\" target=\"_blank\" type=\"primary\"><github-outlined /> Github</a-button> \n    <a-button size=\"large\" @click=\"showModel\"><img src=\"assets/piaotips_logo.png\" style=\"max-height: 75%; width: auto;\"/>  北美票帝</a-button>\n    <a-modal v-model:visible=\"showPiaoTipsModal\" title=\"北美票帝\">\n    <template #footer>\n        <a-button href=\"https://piao.tips\" target=\"_blank\" >官网 piao.tips</a-button>\n        <a-button href=\"https://weibo.com/airticketna\" target=\"_blank\" >微博 @北美票帝</a-button>\n      </template>\n      <img src=\"assets/piaotips_large.jpg\" style=\"max-width: 100%; height: auto;\"/>\n    </a-modal>\n    <div class=\"ad-container\">\n        <Adsense\n            data-ad-client=\"ca-pub-3973436778637330\"\n            data-ad-slot=\"5591115055\"\n            data-ad-format=\"auto\"\n            data-full-width-responsive=\"true\">\n        </Adsense>\n    </div>\n</template>\n\n<script>\nimport { Button, Modal } from 'ant-design-vue'\nimport { GithubOutlined } from '@ant-design/icons-vue';\nexport default {\n    components: {\n        AButton: Button,\n        GithubOutlined,\n        AModal: Modal,\n    },\n    data() {\n        return {\n            showPiaoTipsModal: false,\n        }\n    },\n    methods: {\n        showModel() {\n            this.showPiaoTipsModal = true;\n        },\n    },\n}\n</script>\n\n<style>\n\n</style>","import { render } from \"./HeaderLinks.vue?vue&type=template&id=c94e45c8\"\nimport script from \"./HeaderLinks.vue?vue&type=script&lang=js\"\nexport * from \"./HeaderLinks.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/runner/work/rongduan_or_not/rongduan_or_not/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./FlightView.vue?vue&type=template&id=2090f2f2\"\nimport script from \"./FlightView.vue?vue&type=script&lang=js\"\nexport * from \"./FlightView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/runner/work/rongduan_or_not/rongduan_or_not/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","\n<template>\n  <div>\n    <a-row justify=\"space-around\">\n      <a-col :lg=\"12\" :md=\"24\">\n        <h1>今天航班熔断了吗？</h1>\n        <hr />\n        一个简单的熔断计算器：填入已知的阳性病例信息，计算未来会被熔断的航班。\n        <br />\n        <header-links-new></header-links-new>\n        <p>不考虑奖励航班和控制客座率措施。<strong>仅供参考！</strong></p>\n\n        首个航班入境日期：<a-date-picker\n          v-model:value=\"beginDate\"\n          @change=\"inputHandler\"\n        ></a-date-picker>\n        <br />\n        周数：<a-input-number\n          v-model:value=\"numberOfWeeks\"\n          :min=\"1\"\n          :max=\"40\"\n          @change=\"inputHandler\"\n        />\n        \n        <p>图例：日期，取消开关，阳性数量 -> 熔断状态，航班状态 <br/>\n        地区提示：美国：航司可能对航班进行<a href=\"https://piao.tips/7bc7e7ee15/\" target=\"_blank\">「规律性取消」</a>，可使用航班卡片中的开关手动取消特定航班。</p>\n\n        <a-collapse>\n          <a-collapse-panel key=\"states\" header=\"状态说明\">\n            <p>正常：航班状态正常（阳性数小于5，或阳性数不超过本航班入境人数的4%，不触发熔断）</p>\n            <p>小熔断：阳性数大于等于5，且超过入境人数的4%，且不超过入境人数的8%，触发航班入境第四周起的 1 周熔断</p>\n            <p>大熔断：阳性数大于等于5，且超过入境人数的8%，触发航班入境第四周起的 2 周熔断</p>\n            <hr>\n            <p>其他注释：统计至落地日+5天，默认航班客座率为75%</p>\n          </a-collapse-panel>\n        </a-collapse>\n      </a-col>\n    </a-row>\n\n    <a-row justify=\"space-around\">\n      <a-col :lg=\"12\" :md=\"24\">\n        <div v-for=\"(item, index) in datesDetails\" :key=\"item.date\">\n          <date-item-new\n            :date=\"item.date\"\n            :count=\"item.count\"\n            :index=\"index\"\n            :triggerStatus=\"item.triggerStatus\"\n            :flightStatus=\"item.flightStatus\"\n            :enabled=\"item.enabled\"\n            :surely=\"item.surely\"\n            @itemChange=\"itemChangeHandler\"\n          ></date-item-new>\n        </div>\n      </a-col>\n    </a-row>\n  </div>\n</template>\n\n<script>\nimport {\n  Button,\n  DatePicker,\n  InputNumber,\n  Space,\n  Row,\n  Col,\n  Collapse,\n  Form,\n  Alert,\n  Switch\n} from \"ant-design-vue\";\n\n\nimport DateItemNew from \"./DateItemNew.vue\";\nimport HeaderLinksNew from \"./HeaderLinksNew.vue\";\nimport {calculate, buildEmptyList, simulationMain } from \"../utils/simulation_new.js\";\nimport { toRaw } from \"@vue/reactivity\";\n\nexport default {\n  components: {\n    AButton: Button,\n    ADatePicker: DatePicker,\n    ASpace: Space,\n    AInputNumber: InputNumber,\n    DateItemNew,\n    ARow: Row,\n    ACol: Col,\n    ACollapse: Collapse,\n    ACollapsePanel: Collapse.Panel,\n    AForm: Form,\n    AFormItem: Form.Item,\n    AAlert: Alert,\n    ASwitch: Switch,\n    HeaderLinksNew,\n  },\n  data() {\n    return {\n      beginDate: \"\",\n      numberOfWeeks: 10,\n      datesDetails: [],\n      knownWeekCount: 0,\n    };\n  },\n  computed: {\n    initialized() {\n      return this.datesDetails.length > 0;\n    },\n  },\n  methods: {\n    inputHandler(value) {\n      if (!value) return;\n\n\n      // repopulate\n      let targetDatesDetails = buildEmptyList(this.numberOfWeeks, this.beginDate);\n\n      for(let i = 0; i < targetDatesDetails.length; i++) {\n        let match = this.datesDetails.filter(x => x.date === targetDatesDetails[i].date)\n        if (match.length == 1) {\n          targetDatesDetails[i].count = match[0].count;\n          targetDatesDetails[i].enabled = match[0].enabled;\n        }\n        this.datesDetails.push(targetDatesDetails[i]);\n      }\n\n      this.datesDetails = targetDatesDetails;\n\n      this.reCalculate();\n    },\n    itemChangeHandler(param) {\n      this.datesDetails[param.index].count = param.count;\n      this.datesDetails[param.index].enabled = param.enabled;\n      this.reCalculate();\n    },\n    reCalculate() {\n      this.datesDetails = calculate(this.datesDetails);\n    },\n  },\n};\n</script>\n\n<style>\n</style>","<template>\n    <a-card :class=\"[flightStatus]\">\n        第 {{index+1}} 周:  {{date}}\n        <a-radio-group v-model:value=\"localCount\" @change=\"countChangeHandler\" :disabled=\"!localEnabled\">\n            <a-radio-button value=\"0\">正常</a-radio-button>\n            <a-radio-button value=\"5\">小熔断</a-radio-button>\n            <a-radio-button value=\"10\">大熔断</a-radio-button>\n        </a-radio-group>\n        <a-switch v-model:checked=\"localEnabled\" size=\"small\" @change=\"enabledChangeHandler\"></a-switch>\n        <!-- <a-input-number v-model:value=\"localCount\" :min=\"0\" :disabled=\"!localEnabled\"></a-input-number> -->\n        <a-button :class=\"triggerStatus\">{{surelyStr + triggerStatusName}}</a-button>\n        <span v-if=\"flightStatus === 'yes' \"><check-outlined /></span>\n        <span v-else> <stop-outlined /></span>\n    </a-card>\n</template>\n\n<script>\n  import { Button, InputNumber, Card, Switch, Radio } from 'ant-design-vue';\n  \n  import { CheckOutlined, StopOutlined } from '@ant-design/icons-vue';\n\n\nexport default {\n    components: {\n      AButton: Button,\n      AInputNumber: InputNumber,\n      ACard: Card,\n      CheckOutlined,\n      StopOutlined,\n      ASwitch: Switch,\n      ARadioGroup: Radio.Group,\n      ARadioButton: Radio.Button,\n    },\n    props: {\n        date: {\n            type: String,\n            required: true\n        },\n        count: {\n            type: Number,\n            required: false,\n            default: 0,\n        },\n        index: {\n            type: Number,\n            required: true\n        },\n        triggerStatus: {\n            type: String,\n            required: true\n        },\n        flightStatus: {\n            type: String,\n            required: true\n        },\n        enabled: {\n            type: Boolean,\n            required: true,\n        },\n        surely: {\n            type: Boolean,\n            required: true,\n        },\n    },\n    emits: ['itemChange'],\n    data() {\n        return {\n            localCount: this.count,\n            triggerStatusMap: {\n                \"ok\": \"正常\",\n                \"minor\": \"小熔断\",\n                \"major\": \"大熔断\",\n                \"cancelled\": \"取消\",\n            },\n            localEnabled: this.enabled,\n            size: \"small\"\n        }\n    },\n    methods: {\n        countChangeHandler(event) {\n            console.log(\"here!\")\n            console.log(event)\n            console.log(event.target.value)\n            this.localCount = parseInt(event.target.value)\n            this.$emit('itemChange', {\n                date: this.date,\n                count: this.localCount,\n                enabled: this.localEnabled,\n                index: this.index\n            })\n        },\n        enabledChangeHandler(value) {\n            this.localEnabled = value\n            if (!this.localEnabled) {\n                this.localCount = 0\n            }\n            this.$emit('itemChange', {\n                date: this.date,\n                count: this.localCount,\n                enabled: this.localEnabled,\n                index: this.index\n            })\n        },\n    },\n    computed: {\n        triggerStatusName() {\n            if(this.triggerStatus in this.triggerStatusMap) {\n                return this.triggerStatusMap[this.triggerStatus]\n            } else {\n                return this.triggerStatus.replace(\"broken by\", \"熔断，触发于\")\n            }\n\n        },\n        surelyStr() {\n            return this.surely ? \"(稳)\" : \"\"\n        },\n    },\n    watch: { // 避免 props 和本地状态不同步\n        count: {\n            handler(value) {\n                this.localCount = value\n            },\n            immediate: true\n        },\n        enabled: {\n            handler(value) {\n                this.localEnabled = value\n            },\n            immediate: true\n        },\n    }\n}\n</script>\n\n<style scoped>\n.ok {\n    background-color: #28a745;\n}\n.minor {\n    background-color: #ef5350;\n}\n.major {\n    background-color: #f44336;\n}\n.immediate {\n    background-color: #ff1744;\n}\n.cancelled {\n    background-color: #78909c;\n}\n\n.yes {\n    background-color: #81c784;\n}\n.no {\n    background-color: #6c757d;\n}\n\n\n\n\n</style>","import { render } from \"./DateItemNew.vue?vue&type=template&id=7b72b60f&scoped=true\"\nimport script from \"./DateItemNew.vue?vue&type=script&lang=js\"\nexport * from \"./DateItemNew.vue?vue&type=script&lang=js\"\n\nimport \"./DateItemNew.vue?vue&type=style&index=0&id=7b72b60f&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/runner/work/rongduan_or_not/rongduan_or_not/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7b72b60f\"]])\n\nexport default __exports__","<template>\n    <h3>熔断措施更新于 2022/8/7</h3>\n    <a-button size=\"large\" href=\"http://www.caac.gov.cn/XWZX/MHYW/202208/t20220807_214888.html\" target=\"_blank\"><img src=\"assets/caac_logo.png\" style=\"max-height: 75%; width: auto;\"/>民航局文件</a-button> \n    <a-button size=\"large\" href=\"https://github.com/jerrylususu/rongduan_or_not\" target=\"_blank\" type=\"primary\"><github-outlined /> Github</a-button> \n    <a-button size=\"large\" @click=\"showModel\"><img src=\"assets/piaotips_logo.png\" style=\"max-height: 75%; width: auto;\"/>  北美票帝</a-button>\n    <a-modal v-model:visible=\"showPiaoTipsModal\" title=\"北美票帝\">\n    <template #footer>\n        <a-button href=\"https://piao.tips\" target=\"_blank\" >官网 piao.tips</a-button>\n        <a-button href=\"https://weibo.com/airticketna\" target=\"_blank\" >微博 @北美票帝</a-button>\n      </template>\n      <img src=\"assets/piaotips_large.jpg\" style=\"max-width: 100%; height: auto;\"/>\n    </a-modal>\n    <div class=\"ad-container\">\n        <Adsense\n            data-ad-client=\"ca-pub-3973436778637330\"\n            data-ad-slot=\"5591115055\"\n            data-ad-format=\"auto\"\n            data-full-width-responsive=\"true\">\n        </Adsense>\n    </div>\n</template>\n\n<script>\nimport { Button, Modal } from 'ant-design-vue'\nimport { GithubOutlined } from '@ant-design/icons-vue';\nexport default {\n    components: {\n        AButton: Button,\n        GithubOutlined,\n        AModal: Modal,\n    },\n    data() {\n        return {\n            showPiaoTipsModal: false,\n        }\n    },\n    methods: {\n        showModel() {\n            this.showPiaoTipsModal = true;\n        },\n    },\n}\n</script>\n\n<style>\n\n</style>","import { render } from \"./HeaderLinksNew.vue?vue&type=template&id=c8d0373a\"\nimport script from \"./HeaderLinksNew.vue?vue&type=script&lang=js\"\nexport * from \"./HeaderLinksNew.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/runner/work/rongduan_or_not/rongduan_or_not/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","\nconst probCountMap = {\n    \"ok\": 0,\n    \"minor\": 5,\n    \"major\": 10,\n}\n\nfunction calculate(datesDetails){\n    // inplace, return reference\n    return calculateSurely(calculateBreak(datesDetails))\n}\n\nfunction calculateBreak(datesDetails) {\n    // inplace\n    console.log(\"recalculating...\");\n\n    // 状态重置\n    for (let i = 0; i < datesDetails.length; i++) {\n      let item = datesDetails[i];\n\n      item.triggerStatus = \"ok\";\n      item.flightStatus = \"yes\";\n      item.surely = false;\n\n      if (!item.enabled) {\n        item.triggerStatus = \"cancelled\";\n        item.flightStatus = \"no\";\n      }\n    }\n\n    // 计算熔断\n    for (let i = 0; i < datesDetails.length; i++) {\n      let item = datesDetails[i];\n      let breakWeekCount = 0;\n      let advanceWeek = 0;\n      let forceImmediateBreak = false;\n\n      if (item.flightStatus === \"yes\") {\n        if (0 <= item.count && item.count < 5) {\n          item.triggerStatus = \"ok\";\n        } else if (5 <= item.count && item.count < 10) {\n          item.triggerStatus = \"minor\";\n          breakWeekCount = 1;\n          advanceWeek = 4 - 1;\n        } else if (10 <= item.count && item.count < 30) {\n          item.triggerStatus = \"major\";\n          breakWeekCount = 2;\n          advanceWeek = 4 - 1;\n        }\n      }\n\n      let j = 0;\n      while (\n        breakWeekCount > 0 &&\n        (i + advanceWeek + j < datesDetails.length)\n      ) {\n        let futureItem = datesDetails[i + advanceWeek + j];\n        if (futureItem.enabled) {\n          if (futureItem.flightStatus === \"yes\" || forceImmediateBreak) {\n            futureItem.flightStatus = \"no\";\n            futureItem.triggerStatus = `broken by ${item.date}`;\n            breakWeekCount--;\n            if (breakWeekCount === 0) {\n              forceImmediateBreak = false;\n            }\n          }\n        }\n\n        j++;\n      }\n    }\n\n    return datesDetails\n}\n\nfunction calculateSurely(datesDetails) {\n\n    // inplace\n\n    // 计算稳的航班\n    // 稳的航班：连续触发熔断（或者被取消）的航班和被熔断的航班相连，熔断结束后的头两个航班是一定安全的\n    let i = 0;\n    let surelyMarked = false\n    while (i < datesDetails.length) {\n    \n    if (datesDetails[i].flightStatus === \"no\" \n        && i - 1 >= 0 \n        &&  [\"major\", \"minor\", \"immediate\"].includes(datesDetails[i-1].triggerStatus)) {\n        console.log(i)\n        while (datesDetails[i].flightStatus === \"no\") {\n        i++;\n        }\n        let safeCount = 1;\n        while (safeCount > 0 && i < datesDetails.length) {\n        if (datesDetails[i].flightStatus === \"yes\") {\n            safeCount--;\n            datesDetails[i].surely = true;\n            surelyMarked = true;\n        }\n        i++;\n        }\n    }\n\n    if (surelyMarked) {\n        surelyMarked = false;\n        i--;\n    }\n    i++;\n    }\n\n    return datesDetails\n}\n\nfunction buildEmptyList(numberOfWeeks, beginDate) {\n    let targetDatesDetails = []\n    for (let i = 1; i <= numberOfWeeks; i++) {\n      let date = new Date(beginDate);\n      date.setDate(date.getDate() + (i - 1) * 7);\n      let dateString = new Date(date.getTime() - (date.getTimezoneOffset() * 60000 ))\n                  .toISOString()\n                  .split(\"T\")[0];\n      targetDatesDetails.push({\n        date: dateString,\n        count: 0,\n        triggerStatus: \"ok\",\n        flightStatus: \"yes\",\n        enabled: true, // 取消\n        surely: false, // 稳\n      });\n    }\n    return targetDatesDetails\n}\n\nfunction applyState(datesDetails, countState, enableState) {\n    for (let [idx, val] of countState.entries()) {\n        datesDetails[idx].count = val;\n    }\n    for (let [idx, val] of enableState.entries()) {\n        datesDetails[idx].enabled = val;\n    }\n}\n\nfunction buildInitialState(datesDetails, numberOfWeeks, knownWeekCount){\n    let countState = []\n    for (let i = 0; i < numberOfWeeks; i++) {\n        countState.push(0)\n    }\n    for (let i = 0; i < knownWeekCount; i++) {\n        countState[i] = datesDetails[i].count\n    }\n    let enableState = datesDetails.map(item => item.enabled)\n    return [countState, enableState]\n}\n\nfunction generateNext(datesDetails, currentSequence, probMap) {\n    let [actions, prob] = currentSequence;\n    let lastActedIndex = 0\n    for (let i=0; i < actions.length; i++) {\n        let [action, idx] = actions[i]\n        lastActedIndex = idx\n        if (action === \"nop\"){\n            continue\n        }\n        datesDetails[idx].count = probCountMap[action]\n    }\n\n    calculateBreak(datesDetails)\n\n    let nextUndertermined = lastActedIndex + 1\n    while (nextUndertermined < datesDetails.length && \n            (datesDetails[nextUndertermined].triggerStatus !== \"ok\" || !datesDetails[nextUndertermined].enabled)) {\n        nextUndertermined++\n    }\n\n    if (nextUndertermined === datesDetails.length) {\n        return null\n    }\n\n    let results = []\n    for (const [triggerState, triggerProb] of Object.entries(probMap)) {\n        if (triggerProb !== 0) {\n            let newActions = [...actions]\n            newActions.push([triggerState, nextUndertermined])\n            let newProb = prob * triggerProb\n            results.push([newActions, newProb])\n        }\n    }\n    return results\n}\n\nfunction getDailyResult(datesDetails, completedActions, initialCountState, initialEnableState) {\n    let dayToStatusMap = {}\n\n    for (let item of datesDetails){\n        dayToStatusMap[item.date] = {\"yes_prob\": 0, \"yes\": 0, \"no\": 0}\n    }\n\n    for (let actions_and_prob of completedActions) {\n        applyState(datesDetails, initialCountState, initialEnableState)\n        let [actions, prob] = actions_and_prob\n        for (let i=0; i < actions.length; i++) {\n            let [action, idx] = actions[i]\n            if (action === \"nop\"){\n                continue\n            }\n            datesDetails[idx].count = probCountMap[action]\n        }\n        calculateBreak(datesDetails)\n        for (let item of datesDetails) {\n            dayToStatusMap[item.date][item.flightStatus] = 1 + (dayToStatusMap[item.date][item.flightStatus] ?? 0)\n            if (item.flightStatus === \"yes\") {\n                dayToStatusMap[item.date][\"yes_prob\"] = prob + (dayToStatusMap[item.date][\"yes_prob\"] ?? 0)\n            }\n        }\n    }\n\n    return dayToStatusMap\n}\n\nfunction simulationMain(simConfig){\n    // have to copy\n\n    // debugger;\n    let {datesDetails, beginDate, numOfWeeks, knownWeekCount, probMap} = simConfig;\n\n    console.log(\"datesDetails\", datesDetails)\n\n    let workingDatesDetails = buildEmptyList(numOfWeeks, beginDate);\n    let [initialCountState, initialEnableState] = buildInitialState(datesDetails, numOfWeeks, knownWeekCount); \n    let possibleActions =  [[ [[\"nop\", knownWeekCount - 1]] ,1]] \n    let completedActions = []\n\n    while(possibleActions.length > 0){\n        applyState(workingDatesDetails, initialCountState, initialEnableState)\n        let currentSequence = possibleActions.shift()\n        let nextSteps = generateNext(workingDatesDetails, currentSequence, probMap)\n        if (nextSteps === null) {\n            completedActions.push(currentSequence)\n        } else {\n            possibleActions = possibleActions.concat(nextSteps)\n        }\n    }\n\n    console.log(\"sim done\")\n    console.log(`prob sum: ${completedActions.map(x => x[1]).reduce((a, b) => a + b, 0)}`)\n\n    let results = getDailyResult(workingDatesDetails, completedActions, initialCountState, initialEnableState)\n    return results\n}\n\n// https://gist.github.com/nikolas/b0cce2261f1382159b507dd492e1ceef\n/**\n * A linear interpolator for hex colors.\n *\n * Based on:\n * https://gist.github.com/rosszurowski/67f04465c424a9bc0dae\n *\n * @param {Number} a  (hex color start val)\n * @param {Number} b  (hex color end val)\n * @param {Number} amount  (the amount to fade from a to b)\n *\n * @example\n * // returns 0x7f7f7f\n * lerpColor(0x000000, 0xffffff, 0.5)\n *\n * @returns {Number}\n */\n const lerpColor = function(a, b, amount) {\n  const ar = a >> 16,\n        ag = a >> 8 & 0xff,\n        ab = a & 0xff,\n\n        br = b >> 16,\n        bg = b >> 8 & 0xff,\n        bb = b & 0xff,\n\n        rr = ar + amount * (br - ar),\n        rg = ag + amount * (bg - ag),\n        rb = ab + amount * (bb - ab);\n\n  return '#' + ((1 << 24) + (rr << 16) + (rg << 8) + rb | 0).toString(16).slice(1);\n};\n\nexport { simulationMain, calculate, buildEmptyList, lerpColor };\n","import { render } from \"./FlightViewNew.vue?vue&type=template&id=7e8c5078\"\nimport script from \"./FlightViewNew.vue?vue&type=script&lang=js\"\nexport * from \"./FlightViewNew.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/runner/work/rongduan_or_not/rongduan_or_not/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./App.vue?vue&type=template&id=70ca9c98\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/runner/work/rongduan_or_not/rongduan_or_not/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createApp } from 'vue'\nimport App from './App.vue'\nimport 'ant-design-vue/dist/antd.css';\nimport Adsense from 'vue-google-adsense/dist/Adsense.min.js'\nimport ScriptX from 'vue-scriptx'\n\n\nconst app = createApp(App)\napp.use(ScriptX)\napp.use(Adsense)\n\napp.mount('#app')\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkrongduanlema\"] = self[\"webpackChunkrongduanlema\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(7677); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["$data","_createElementBlock","_hoisted_1","_createVNode","_component_flight_view_new","_hoisted_2","_component_flight_view","_component_a_row","justify","_component_a_col","lg","md","_component_a_switch","checked","$event","_createBlock","_resolveDynamicComponent","_createElementVNode","href","target","_hoisted_4","_component_header_links","_hoisted_5","_component_a_date_picker","value","onChange","$options","_hoisted_7","_component_a_input_number","min","max","_hoisted_9","_component_a_collapse","_component_a_collapse_panel","key","header","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_component_a_alert","message","type","_component_a_form","layout","_component_a_form_item","label","_component_a_button","onClick","disabled","_Fragment","_renderList","item","index","date","_component_date_item","count","triggerStatus","flightStatus","enabled","surely","showProb","yesProb","onItemChange","_component_a_card","class","$props","_toDisplayString","size","_component_check_outlined","_component_stop_outlined","style","toFixed","probCountMap","calculate","datesDetails","calculateSurely","calculateBreak","console","log","i","length","breakWeekCount","advanceWeek","forceImmediateBreak","prevItem","j","futureItem","surelyMarked","includes","safeCount","buildEmptyList","numberOfWeeks","beginDate","targetDatesDetails","Date","setDate","getDate","dateString","getTime","getTimezoneOffset","toISOString","split","push","applyState","countState","enableState","idx","val","entries","buildInitialState","knownWeekCount","map","generateNext","currentSequence","probMap","actions","prob","lastActedIndex","action","nextUndertermined","results","triggerState","triggerProb","Object","newActions","newProb","getDailyResult","completedActions","initialCountState","initialEnableState","dayToStatusMap","actions_and_prob","simulationMain","simConfig","numOfWeeks","workingDatesDetails","possibleActions","shift","nextSteps","concat","x","reduce","a","b","lerpColor","amount","ar","ag","ab","br","bg","bb","rr","rg","rb","toString","slice","components","AButton","AInputNumber","ACard","CheckOutlined","StopOutlined","ASwitch","props","String","required","Number","default","Boolean","emits","data","localCount","this","triggerStatusMap","localEnabled","methods","countChangeHandler","$emit","enabledChangeHandler","computed","triggerStatusName","replace","surelyStr","probColor","textColor","watch","handler","immediate","__exports__","src","_component_github_outlined","_component_a_modal","visible","title","footer","_component_Adsense","GithubOutlined","AModal","showPiaoTipsModal","showModel","ADatePicker","ASpace","DateItem","ARow","ACol","ACollapse","ACollapsePanel","AForm","AFormItem","AAlert","HeaderLinks","probOk","probMinor","probMajor","probImmediate","enableSimulation","probSumValid","initialized","simulationEnabled","inputHandler","match","filter","reCalculate","itemChangeHandler","param","runSimulation","toRaw","_component_header_links_new","_component_date_item_new","_component_a_radio_group","_component_a_radio_button","ARadioGroup","ARadioButton","event","parseInt","DateItemNew","HeaderLinksNew","name","FlightView","FlightViewNew","newVersionEnabled","created","document","mounted","gaScript","createElement","setAttribute","head","appendChild","render","app","createApp","App","use","ScriptX","Adsense","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","call","m","deferred","O","result","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","keys","every","splice","r","n","getter","__esModule","d","definition","o","defineProperty","enumerable","get","g","globalThis","Function","e","window","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","id","chunkLoadingGlobal","self","forEach","bind","__webpack_exports__"],"sourceRoot":""}